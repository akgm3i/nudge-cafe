# 実装計画兼タスク管理

このドキュメントは実装計画であり、タスク管理も兼ねている。作業を進める際は該当タスクの進捗を更新していく。
タスク完了後、チェックを入れること。

## 全体進捗

- [x] Phase 0: 設計ドキュメントの拡充
- [ ] Phase 1: プロジェクト基盤の構築
- [ ] Phase 2: コアゲームサイクルの実装
- [ ] Phase 3: ゲーム進行と物語の実装
- [ ] Phase 4: 仕上げと永続化
- [ ] Phase 5: 最終章とエンディング

---

## Phase 0: 設計ドキュメントの拡充

- [x] **タスク: データ構造定義書の作成**
    - 内容: ゲームの状態(gameState)の具体的なキーと型を定義したドキュメント(`DATA_STRUCTURE.md`)を作成する。
    - 完了要件:
        - [x] 状態管理に必要なキー（所持金、評判など）が網羅されている。
        - [x] 各キーのTypeScript型が定義されている。
    - 進捗: 完了。

- [x] **タスク: コンポーネント設計方針の策定**
    - 内容: Reactコンポーネントの粒度、責務分割、命名規則などのガイドラインを策定し、ドキュメント化する。
    - 完了要件:
        - [x] コンポーネントのディレクトリ構成ルールが定義されている。
        - [x] Presentational/Containerの責務分離などの方針が明記されている。
    - 進捗: 完了。

- [x] **タスク: 詳細シナリオ/イベントリストの作成**
    - 内容: チャプターごとの詳細なセリフ、分岐条件、報酬などを一覧化したドキュメントを作成する。
    - 完了要件:
        - [x] 序章〜第一部までのシナリオが詳細化されている。
        - [x] イベント発生のフラグ管理方法が定義されている。
    - 進捗: 完了。

- [x] **タスク: アニメーション/サウンド指示書の作成**
    - 内容: ゲーム内の主要なアニメーションとサウンドについて、タイミングや内容を具体的に指示するドキュメントを作成する。
    - 完了要件:
        - [x] ニャッジの感情表現アニメーションのパターンが定義されている。
        - [x] 主要なUI操作に対する効果音のリストが作成されている。
    - 進捗: 完了。

- [x] **タスク: スコープ定義書（やらないことリスト）の作成**
    - 内容: このプロジェクトの実装範囲外とする機能を明記したドキュメントを作成する。
    - 完了要件:
        - [x] スコープ外の機能（例: オンラインランキング）がリストアップされている。
    - 進捗: 完了。

- [x] **タスク: 用語集（Glossary）の作成**
    - 内容: プロジェクト固有の用語（ナッジ、発見メモなど）とその定義を一覧化したドキュメントを作成する。
    - 完了要件:
        - [x] 主要なゲーム内用語が網羅されている。
    - 進捗: 完了。

---

## Phase 1: プロジェクト基盤の構築

- [ ] **タスク: React+TypeScriptプロジェクトの初期セットアップ**
    - 内容: `create-react-app`等を用いてプロジェクトを作成し、Linter/Formatter(ESLint/Prettier)を導入。基本的なディレクトリ構成を整備する。
    - 参照: `docs/dev/概要.md`
    - 完了要件:
        - [ ] React+TypeScriptのプロジェクトが作成されている。
        - [ ] `src/components`, `src/pages`, `src/hooks`, `src/types` などの基本的なディレクトリが整備されている。
        - [ ] `npm run lint`, `npm run format` が利用可能。
    - 進捗: 未着手。

- [ ] **タスク: GitHub ActionsによるCI/CDパイプラインの構築**
    - 内容: push時に自動でビルド、テスト、デプロイが行われるワークフローを構築する。
    - 参照: `docs/dev/概要.md`
    - 完了要件:
        - [ ] push時に`npm run build`が実行され、成功することを確認する。
        - [ ] mainブランチへのマージ時にGitHub Pagesへ自動デプロイされる。
    - 進捗: 未着手。

- [ ] **タスク: メイン画面の基本レイアウト実装**
    - 内容: ヘッダー、メインビュー、フッターの3つの領域を持つ基本的なレイアウトコンポーネントを実装する。
    - 参照: `docs/dev/UIUX.md` (セクション1)
    - 完了要件:
        - [ ] ヘッダー領域にリソース（所持金、評判）と設定アイコンのプレースホルダーが配置される。
        - [ ] フッター領域に「ノート」「メニュー開発」「内装変更」ボタンのプレースホルダーが配置される。
        - [ ] メインビュー領域が中央に配置される。
    - 進捗: 未着手。

---

## Phase 2: コアゲームサイクルの実装

- [ ] **タスク: カフェ店内とキャラクターの表示**
    - 内容: メインビューにカフェの背景と、歩き回るニャッジの基本的なアニメーションを実装する。
    - 参照: `docs/dev/UIUX.md`, `docs/dev/デザイン.md`
    - 完了要件:
        - [ ] カフェの背景画像が表示される。
        - [ ] ニャッジのキャラクターが画面内に表示され、簡単なアニメーションを行う。
    - 進捗: 未着手。

- [ ] **タスク: 【観察】お客さんの表示とインタラクション**
    - 内容: 店内にデフォルメされたお客さんキャラクターを配置し、タップすると心の声（フキダシ）が表示される機能を実装する。
    - 参照: `docs/dev/UIUX.md` (セクション2.①)
    - 完了要件:
        - [ ] お客さんキャラクターが店内の所定の位置に表示される。
        - [ ] お客さんをタップすると、頭上にフキダシとテキストが表示される。
    - 進捗: 未着手。

- [ ] **タスク: 【解読】レシピノートUIの実装**
    - 内容: 「ノート」ボタンで表示されるモーダルウィンドウと、左右スワイプでページをめくる機能を実装する。
    - 参照: `docs/dev/UIUX.md` (セクション2.②)
    - 完了要件:
        - [ ] 「ノート」ボタンを押すと、モーダルでレシピノートが表示される。
        - [ ] 左右のスワイプ操作でページがめくれる。
        - [ ] 詩の中のキーワードをタップするとハイライトされる。
    - 進捗: 未着手。

- [ ] **タスク: 【実行】メニュー開発機能の実装**
    - 内容: 「メニュー開発」ボタンで表示されるモーダル内で、選択肢からメニューを作成し、スライダーで価格を設定するUIとロジックを実装する。
    - 参照: `docs/dev/UIUX.md` (セクション2.③)
    - 完了要件:
        - [ ] 「メニュー開発」ボタンでモーダルが表示される。
        - [ ] ベース、アレンジ、名前をボタンで選択できる。
        - [ ] 価格設定用のスライダーが機能する。
        - [ ] 作成したメニューがゲーム内データとして一時的に保存される。
    - 進捗: 未着手。

- [ ] **タスク: 【実行】内装変更機能の実装**
    - 内容: 「内装変更」ボタンで編集モードに切り替え、カルーセルUIでアイテムを選択し、店内のグラフィックをリアルタイムプレビューする機能を実装する。
    - 参照: `docs/dev/UIUX.md` (セクション2.③)
    - 完了要件:
        - [ ] 「内装変更」ボタンで編集モードに切り替わる。
        - [ ] 変更可能なエリアがハイライトされる。
        - [ ] 画面下部のカルーセルUIでアイテムを選択できる。
        - [ ] 選択したアイテムが店内に即時反映（プレビュー）される。
    - 進捗: 未着手。

- [ ] **タスク: 【発見】フィードバックと発見メモの実装**
    - 内容: 実行した結果（成功/失敗）に応じたUIフィードバック（エフェクト、アニメーション）と、「発見メモ」への記録機能を実装する。
    - 参照: `docs/dev/UIUX.md` (セクション2.④), `docs/dev/システム.md`
    - 完了要件:
        - [ ] 成功時にハートのエフェクトやリソース獲得のポップアップが表示される。
        - [ ] ニャッジが成功/失敗に応じたアニメーションを行う。
        - [ ] 「新しい発見！」バナーが表示され、タップすると発見メモが開き、内容が追記される。
    - 進捗: 未着手。

---

## Phase 3: ゲーム進行と物語の実装

- [ ] **タスク: ゲーム状態管理システムの導入**
    - 内容: ゲーム全体の状態（所持金、評判、解放済みチャプター、発見メモの内容など）を一元管理するシステム（Context APIやZustandなど）を導入する。
    - 参照: `docs/dev/システム.md`
    - 完了要件:
        - [ ] ゲームの状態がグローバルに管理されるようになっている。
        - [ ] 各コンポーネントから状態の参照・更新が可能。
    - 進捗: 未着手。

- [ ] **タスク: ストーリー進行エンジンの実装**
    - 内容: チャプターやイベントのシナリオデータを定義し、ゲームの進行度に応じてシナリオを再生する基本的なエンジンを実装する。
    - 参照: `docs/dev/ストーリー.md`
    - 完了要件:
        - [ ] シナリオデータ（登場人物、セリフなど）をJSONなどで定義できる。
        - [ ] 特定の条件（例: 評判が一定値に達する）で次のチャプターが解放される。
    - 進捗: 未着手。

- [ ] **タスク: 序章〜第一部のシナリオ実装**
    - 内容: 序章と第一部のストーリー（おとり効果、アンカリング効果など）をシナリオデータとして実装し、ゲーム内で体験できるようにする。
    - 参照: `docs/dev/ストーリー.md`
    - 完了要件:
        - [ ] 序章のチュートリアルがプレイできる。
        - [ ] 第一部の各チャプターが、対応するゲームメカニクスと連動して進行する。
    - 進捗: 未着手。

---

## Phase 4: 仕上げと永続化

- [ ] **タスク: ゲームデータの永続化**
    - 内容: ゲームの状態をブラウザのLocalStorageに保存し、次回起動時に読み込む機能を実装する。
    - 参照: `docs/dev/概要.md` (セクション5, 7)
    - 完了要件:
        - [ ] ゲームの状態が定期的に、または特定のタイミングでLocalStorageに保存される。
        - [ ] ページをリロードしても前回の状態から再開できる。
        - [ ] 設定メニューにセーブ/リセットボタンを実装する。
    - 進捗: 未着手。

- [ ] **タスク: サウンド機能の実装**
    - 内容: BGMと、ボタンタップや成功/失敗時の効果音を再生する機能を実装する。
    - 参照: `docs/dev/UIUX.md`
    - 完了要件:
        - [ ] 設定メニューから音量のON/OFF、調整ができる。
        - [ ] 各シーンでBGMが再生される。
        - [ ] 主要なインタラクションに効果音がつく。
    - 進捗: 未着手。

- [ ] **タスク: 第二部のシナリオ実装**
    - 内容: 第二部のストーリー（現在志向バイアス、サンクコスト効果など）を実装する。
    - 参照: `docs/dev/ストーリー.md`
    - 完了要件:
        - [ ] 第二部の各チャプターがプレイ可能になっている。
    - 進捗: 未着手。

---

## Phase 5: 最終章とエンディング

- [ ] **タスク: 最終章（お祭りイベント）の実装**
    - 内容: 最終章の特別イベント「街のお祭り」を実装する。これまでに学んだ知識を総動員する集大成的な内容とする。
    - 参照: `docs/dev/ストーリー.md`
    - 完了要件:
        - [ ] お祭りに関連する専用のUIやゲームメカニクスが実装されている。
        - [ ] 複数のナッジを組み合わせて課題を解決する流れが体験できる。
    - 進捗: 未着手。

- [ ] **タスク: エピローグとエンディングの実装**
    - 内容: レシピノートの最後のページと、エンディングの演出を実装する。
    - 参照: `docs/dev/ストーリー.md`
    - 完了要件:
        - [ ] 最終章クリア後にエンディングが再生される。
        - [ ] スタッフロールや「はじめから」を選択できる画面が表示される。
    - 進捗: 未着手。

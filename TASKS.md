# 実装計画兼タスク管理

このドキュメントは実装計画であり、タスク管理も兼ねている。作業を進める際は該当タスクの進捗を更新していく。
タスクは1つずつ進めること。タスク完了前に、必ずlintとtestが通ることを確認すること。タスク完了後、チェックを入れること。

## 全体進捗

- [x] Phase 0: 設計ドキュメントの拡充
- [x] Phase 1: プロジェクト基盤の構築
- [ ] Phase 2: コア体験フローの実装
- [ ] Phase 3: ゲーム進行と物語の実装
- [ ] Phase 4: 仕上げと永続化
- [ ] Phase 5: 最終章とエンディング

---

## Phase 0: 設計ドキュメントの拡充

- [x] **タスク: 設計ドキュメントのコンセプト変更**
  - 内容: 全ての設計ドキュメントを「体験先行・仮説検証型」の新コンセプトに合わせて更新した。
  - 完了要件:
    - [x] 全てのドキュメントが新コンセプトに準拠している。
  - 進捗: 完了。

---

## Phase 1: プロジェクト基盤の構築

- [x] **タスク: React+TypeScriptプロジェクトの初期セットアップ**
  - 内容: `create-react-app`等を用いてプロジェクトを作成し、Linter/Formatter(ESLint/Prettier)を導入。基本的なディレクトリ構成を整備する。
  - 参照: `docs/dev/overview.md`
  - 完了要件:
    - [x] React+TypeScriptのプロジェクトが作成されている。
    - [x] `src/components`, `src/pages`, `src/hooks`, `src/types` などの基本的なディレクトリが整備されている。
    - [x] `npm run lint`, `npm run format` が利用可能。
  - 進捗: 完了。

- [x] **タスク: GitHub ActionsによるCI/CDパイプラインの構築**
  - 内容: push時に自動でビルド、テスト、デプロイが行われるワークフローを構築する。
  - 参照: `docs/dev/overview.md`, `docs/dev/asset-pipeline.md`
  - 完了要件:
    - [x] push時に`npm run build`が実行され、成功することを確認する。
    - [x] mainブランチへのマージ時にGitHub Pagesへ自動デプロイされる。
  - 進捗: 完了。

- [x] **タスク: メイン画面の基本レイアウト実装**
  - 内容: ヘッダー、メインビュー、フッターの3つの領域を持つ基本的なレイアウトコンポーネントを実装する。
  - 参照: `docs/dev/uiux.md`
  - 完了要件:
    - [x] ヘッダー領域にリソース（所持金、評判）と設定アイコンのプレースホルダーが配置される。
    - [x] フッター領域に「ノート」「メニュー開発」「内装変更」ボタンのプレースホルダーが配置される。
    - [x] メインビュー領域が中央に配置される。
  - 進捗: 完了。

---

## Phase 2: コア体験フローの実装

- [ ] **タスク: カフェ店内とキャラクターの表示**
  - 内容: メインビューにカフェの背景と、歩き回るニャッジやホーソーン教授の基本的なアニメーションを実装する。
  - 参照: `docs/dev/uiux.md`, `docs/dev/design.md`
  - 完了要件:
    - [ ] カフェの背景画像が表示される。
    - [ ] ニャッジと教授のキャラクターが画面内に表示され、簡単なアニメーションを行う。
  - 進捗: 未着手。

- [ ] **タスク: 【イベント・会話】物語イベントと教授の問いかけ**
  - 内容: 特定の条件下で物語イベント（会話劇）が発生し、その後ホーソーン教授に「問い」を投げかけられる機能を実装する。
  - 参照: `docs/dev/uiux.md` (セクション3.①)
  - 完了要件:
    - [ ] イベント発生条件を満たすと、会話シーンが再生される。
    - [ ] イベント後、教授をタップすると「問いかけ」のセリフが表示される。
  - 進捗: 未着手。

- [ ] **タスク: 【考案】ニャッジとの壁打ち会話**
  - 内容: ニャッジに話しかけると、プレイヤーの思考整理を助ける（壁打ち相手となる）会話機能を実装する。この会話を通じて、プレイヤーが次のアクションを選択する。
  - 参照: `docs/dev/uiux.md` (セクション3.②)
  - 完了要件:
    - [ ] ニャッジをタップすると、現在の状況に応じた素朴な反応が返ってくる。
    - [ ] 会話の最後に、プレイヤーが次の施策（仮説）を選択するUIが表示される。
  - 進捗: 未着手。

- [ ] **タスク: 【実践】メニュー開発・内装変更機能の実装**
  - 内容: プレイヤーが考案した施策を「メニュー開発」や「内装変更」を通じて実践できるようにするUIとロジックを実装する。
  - 参照: `docs/dev/uiux.md`
  - 完了要件:
    - [ ] 「メニュー開発」画面で、仮説に基づいたメニューを作成・変更できる。
    - [ ] 「内装変更」画面で、仮説に基づいた内装の変更ができる。
  - 進捗: 未着手。

- [ ] **タスク: 【記録】発見ノートUIと記録フローの実装**
  - 内容: 営業終了後、その日の結果を振り返り「発見ノート」に記録するUIとロジックを実装する。
  - 参照: `docs/dev/uiux.md` (セクション3.③), `docs/dev/data-structure.md`
  - 完了要件:
    - [ ] 営業終了画面から「発見ノート」を開ける。
    - [ ] WHY, HOW, WHAT, MEMO の各項目を選択式または簡易的な入力で記録できる。
    - [ ] 記録後、ノートに内容が書き込まれるアニメーションが再生される。
    - [ ] 記録した内容は `gameState` に保存される。
  - 進捗: 未着手。

---

## Phase 3: ゲーム進行と物語の実装

- [ ] **タスク: ゲーム状態管理システムの導入**
  - 内容: ゲーム全体の状態（所持金、評判、チャプターID、発見ノートの内容など）を一元管理するシステム（Context APIやZustandなど）を導入する。
  - 参照: `docs/dev/system.md`, `docs/dev/data-structure.md`
  - 完了要件:
    - [ ] ゲームの状態がグローバルに管理されるようになっている。
    - [ ] 各コンポーネントから状態の参照・更新が可能。
  - 進捗: 未着手。

- [ ] **タスク: ストーリー進行エンジンの実装**
  - 内容: `game-scenario.md`で定義されたチャプターやイベントのシナリオデータを読み込み、ゲームの進行度に応じてシナリオを再生する基本的なエンジンを実装する。
  - 参照: `docs/dev/story.md`, `docs/dev/game-scenario.md`
  - 完了要件:
    - [ ] シナリオデータ（登場人物、セリフなど）をJSONなどで定義できる。
    - [ ] 特定の条件（例: 評判が一定値に達する）で次のチャプターが解放される。
  - 進捗: 未着手。

- [ ] **タスク: 序章〜第一部のシナリオ実装**
  - 内容: 序章と第一部のストーリー（おとり効果、アンカリング効果など）を`game-scenario.md`に基づき、シナリオデータとして実装し、ゲーム内で体験できるようにする。
  - 参照: `docs/dev/story.md`, `docs/dev/game-scenario.md`
  - 完了要件:
    - [ ] 序章のチュートリアルがプレイできる。
    - [ ] 第一部の各チャプターが、対応するゲーム体験フローと連動して進行する。
  - 進捗: 未着手。

---

## Phase 4: 仕上げと永続化

- [ ] **タスク: ゲームデータの永続化**
  - 内容: ゲームの状態をブラウザの`localStorage`に保存し、次回起動時に読み込む機能を実装する。
  - 参照: `docs/dev/data-structure.md` (セクション3)
  - 完了要件:
    - [ ] ゲームの状態が定期的に、または特定のタイミングでLocalStorageに保存される。
    - [ ] ページをリロードしても前回の状態から再開できる。
    - [ ] 設定メニューにセーブ/リセットボタンを実装する。
  - 進捗: 未着手。

- [ ] **タスク: サウンド機能の実装**
  - 内容: BGMと、ボタンタップや成功/失敗時の効果音を再生する機能を実装する。
  - 参照: `docs/dev/animation-sound.md`
  - 完了要件:
    - [ ] 設定メニューから音量のON/OFF、調整ができる。
    - [ ] 各シーンでBGMが再生される。
    - [ ] 主要なインタラクションに効果音がつく。
  - 進捗: 未着手。

- [ ] **タスク: 第二部のシナリオ実装**
  - 内容: 第二部のストーリー（現在志向バイアス、サンクコスト効果など）を実装する。
  - 参照: `docs/dev/story.md`, `docs/dev/game-scenario.md`
  - 完了要件:
    - [ ] 第二部の各チャプターがプレイ可能になっている。
  - 進捗: 未着手。

---

## Phase 5: 最終章とエンディング

- [ ] **タスク: 最終章（お祭りイベント）の実装**
  - 内容: 最終章の特別イベント「街のお祭り」を実装する。これまでに発見ノートに記録した知識を総動員する集大成的な内容とする。
  - 参照: `docs/dev/story.md`, `docs/dev/game-scenario.md`
  - 完了要件:
    - [ ] お祭りに関連する専用のUIやゲームメカニクスが実装されている。
    - [ ] 複数の発見を組み合わせて課題を解決する流れが体験できる。
  - 進捗: 未着手。

- [ ] **タスク: エピローグとエンディングの実装**
  - 内容: 発見ノートの最後のページをプレイヤーが記し、エンディングの演出を実装する。
  - 参照: `docs/dev/story.md`, `docs/dev/game-scenario.md`
  - 完了要件:
    - [ ] 最終章クリア後にエンディングが再生される。
    - [ ] スタッフロールや「はじめから」を選択できる画面が表示される。
  - 進捗: 未着手。

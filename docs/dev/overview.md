# 技術仕様書：「ココロジック・カフェ」

## 1. 概要

「ココロジック・カフェ」は、スマートフォンブラウザ向けに開発される、物語体験を中心としたカフェ運営ゲームです。プレイヤーは自身の体験から生まれた疑問を、カフェ運営を通じて検証し、自分だけの「発見ノート」を完成させていきます。プレイヤーの主体的な気づきと、その過程の物語体験を最優先する **「体験先行・仮説検証型」** のゲームデザインを特徴とします。

## 2. ゲームのアーキテクチャ

### 2.1. ゲームサイクル

ゲームのコアとなるのは、プレイヤーにサイクルを意識させない、物語に没入させるための「プレイヤー体験フロー」です。これは開発上の設計思想であり、プレイヤーには一連の自然なカフェ経営物語として体験させます。詳細は[システム仕様書](system.md)を参照してください。

1.  **物語イベントの体験:** プレイヤーはカフェ経営の一環として、不思議な出来事に遭遇します。
2.  **常連客との会話:** イベント後、常連客のフクロウ教授が来店。彼の問いかけにより、プレイヤーは疑問を抱きます。
3.  **営業方針の考案:** パートナーのニャッジとの会話を通じ、疑問の答え（＝仮説）を試すアイデアを自然に思いつきます。
4.  **カフェ運営での実践:** プレイヤーは自ら考案した施策を、通常のカフェ運営の中で試します（＝検証）。
5.  **一日の記録:** 営業終了後、その日の出来事や結果を「発見ノート」に記録します。

### 2.2. プログレッション

ゲームの進行は、物語の進行と「発見ノート」の完成が主軸となります。詳細は[システム仕様書](system.md)を参照してください。

- **物語の進行**: メインストーリーのチャプタークリアによって進みます。
- **「発見ノート」の完成**: ゲーム開始時には白紙のノートが、プレイヤー自身の「なぜ？(Why)」「やってみたこと(How)」「わかったこと(What)」「まとめ(Memo)」によって埋められていきます。

## 3. 使用技術

- **フロントエンド**: TypeScript, React
- **デプロイ**: GitHub Pages

## 4. 主要なコンポーネント

UI/UXの詳細は[UI/UX 仕様書](uiux.md)を参照してください。

### 4.1. メイン画面

- **ヘッダー**: リソース表示、設定メニュー
- **メインビュー**: カフェ店内、キャラクター、インタラクション・ポイント
- **フッター／メインメニュー**: 「ノート」「メニュー開発」「内装変更」ボタン

### 4.2. 発見ノート（旧：レシピノート）

- ゲーム開始時はほぼ白紙の、プレイヤーが自身の発見を記録していく白紙の「実験日誌」。
- 日記のように、一日の終わりに自然な流れで記録するUI。

### 4.3. メニュー開発画面

- モーダルウィンドウ表示
- ボタン選択によるメニュー作成
- スライダーによる価格設定

### 4.4. 内装変更画面

- 編集モードへの切り替え
- カルーセル形式でのアイテム選択
- リアルタイムプレビュー

### 4.5. 営業日誌（旧：発見メモ）

- 「発見ノート」に統合。「一日の記録」として、プレイヤーが主体的に書き込む形式に変更。

## 5. データフロー

- **プレイヤーの操作**: UI操作がイベントとして発生。
- **ゲームロジック**: ゲーム内の状態が変化。
- **リソースの増減**: お客さんの満足度や施策の結果に応じてリソースが増減。
- **発見ノートへの記録**: 営業終了後、プレイヤーがその日の出来事を振り返り、主体的にノートに記録。
- **状態の永続化**: セーブ機能によりゲームの状態を保存。（詳細は[データ構造定義書](data-structure.md)を参照）

## 6. API設計

本ゲームはシングルプレイヤーのブラウザゲームであり、現時点では外部APIとの連携は想定していません。ゲーム内のデータはクライアントサイドで管理・永続化される見込みです。

## 7. デプロイ戦略

- **GitHub Pages**: 開発されたゲームはGitHub Pagesを利用してデプロイされます。
- **CI/CD**: GitHub Actionsなどを利用したCI/CDパイプラインの構築を推奨します。（アセットの扱いについては[アセットパイプライン定義書](asset-pipeline.md)も参照）

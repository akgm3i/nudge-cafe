# 技術仕様書：「ココロジック・カフェ」

## 1. 概要

「ココロジック・カフェ」は、スマートフォンブラウザ向けに開発される、物語体験を中心としたカフェ運営ゲームです。プレイヤーは祖父の遺した詩的なレシピノートを読み解き、行動経済学の概念をゲーム内で体験的に学びながら、カフェを再建し、街の人々の心を豊かにしていきます。

## 2. ゲームのアーキテクチャ

### 2.1. ゲームサイクル

ゲームのコアとなるのは「発見サイクル」です。詳細は[システム仕様書](system.md)を参照してください。

- **【観察：Observe】**: お客さんの行動や表情、店内の雰囲気から変化や謎を見つけ出します。
- **【解読：Interpret】**: 祖父のレシピノートに記された詩的な言葉を読み解き、課題解決のヒントを探します。
- **【実行：Implement】**: 詩の解釈に基づき、メニュー開発や内装変更を直感的なタッチ操作で行います。
- **【発見：Discover】**: 実行結果が即時的かつ視覚的に分かりやすく伝わります。発見は自動的に「発見メモ」に記録されます。

### 2.2. プログレッション

ゲームの進行は、物語の進行と「発見メモ」の完成が主軸となります。詳細は[システム仕様書](system.md)を参照してください。

- **物語の進行**: メインストーリーのチャプタークリアによって進みます。
- **「発見メモ」の完成**: 祖父の詩と、それに対するプレイヤー自身の発見が対になって記録されます。

## 3. 使用技術

- **フロントエンド**: TypeScript, React
- **デプロイ**: GitHub Pages

## 4. 主要なコンポーネント

UI/UXの詳細は[UI/UX 仕様書](uiux.md)を参照してください。

### 4.1. メイン画面

- **ヘッダー**: リソース表示、設定メニュー
- **メインビュー**: カフェ店内、キャラクター、インタラクション・ポイント
- **フッター／メインメニュー**: 「ノート」「メニュー開発」「内装変更」ボタン

### 4.2. レシピノート

- モーダルウィンドウ表示
- スワイプによるページめくり
- キーワードタップによるヒント表示

### 4.3. メニュー開発画面

- モーダルウィンドウ表示
- ボタン選択によるメニュー作成
- スライダーによる価格設定

### 4.4. 内装変更画面

- 編集モードへの切り替え
- カルーセル形式でのアイテム選択
- リアルタイムプレビュー

### 4.5. 発見メモ

- 「発見」の自動記録
- 書き込みアニメーション

## 5. データフロー

- **プレイヤーの操作**: UI操作がイベントとして発生。
- **ゲームロジック**: ゲーム内の状態が変化。
- **リソースの増減**: お客さんの満足度に応じてリソースが増減。
- **発見メモへの記録**: 特定の条件を満たすと「発見」として記録。
- **状態の永続化**: セーブ機能によりゲームの状態を保存。（詳細は[データ構造定義書](data-structure.md)を参照）

## 6. API設計

本ゲームはシングルプレイヤーのブラウザゲームであり、現時点では外部APIとの連携は想定していません。ゲーム内のデータはクライアントサイドで管理・永続化される見込みです。

## 7. デプロイ戦略

- **GitHub Pages**: 開発されたゲームはGitHub Pagesを利用してデプロイされます。
- **CI/CD**: GitHub Actionsなどを利用したCI/CDパイプラインの構築を推奨します。（アセットの扱いについては[アセットパイプライン定義書](asset-pipeline.md)も参照）

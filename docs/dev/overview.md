# 技術仕様書：「ココロジック・カフェ」

## 1. 概要

「ココロジック・カフェ」は、物語体験を中心としたカフェ運営ゲームです。このゲームの最大の特徴は、プレイヤーがまず行動経済学の理論を **自分自身で体験** し、そこで得た気づきを自らのカフェ経営に応用していく点にあります。プレイヤーは理論の「対象」と「主体」の双方を経験することで、生きた知識を学び、「発見ノート」を完成させていきます。

## 2. ゲームのアーキテクチャ

### 2.1. ゲームサイクル

ゲームのコアは、「体験による学習」と「知識の応用」という2つのパートからなるサイクルです。プレイヤーはまず行動経済学の理論を自身の体験として学び、次にそれをカフェ経営に応用します。このサイクルを通じて、プレイヤーは主体的な発見を積み重ねていきます。詳細は[システム仕様書](system.md)を参照してください。

**パート1：体験による学習（プレイヤーが理論の対象となる）**

1.  **事象の体験:** プレイヤーはカフェの運営（例：商品の仕入れ）の中で、他の登場人物（例：仕入れ先の商人）が用いる行動経済学の理論の対象となります。
2.  **問いとの遭遇:** ホーソーン教授からのさりげない問いかけをきっかけに、プレイヤーは自身の意思決定に疑問を抱きます。
3.  **気づきの獲得:** 内省（や、ニャッジとの壁打ち）を通じて、プレイヤーは自身が体験した事象の裏にある法則を理解します。
4.  **発見の記録:** プレイヤーは得られた気づきを「発見ノート」に記録します。

**パート2：知識の応用（プレイヤーが理論の主体となる）**

5.  **機会の発見:** プレイヤーは自身のカフェ経営の中に、学んだ知識を応用できる場面を見つけ出します。
6.  **施策の実践:** プレイヤーは学んだ理論を自身のビジネス（例：メニューの再設計）に応用します。
7.  **結果の観測:** プレイヤーは自身の施策の結果（例：売上の向上）を確認し、学びを確かなものにします。

### 2.2. プログレッション

ゲームの進行は、物語の進行と「発見ノート」の完成が主軸となります。詳細は[システム仕様書](system.md)を参照してください。

- **物語の進行**: メインストーリーのチャプタークリアによって進みます。
- **「発見ノート」の完成**: ゲーム開始時には白紙のノートが、プレイヤー自身の発見によって埋められていきます。その詳細な構造は[システム仕様書](system.md)で定義されます。

## 3. 使用技術

- **フロントエンド**: TypeScript, React
- **デプロイ**: GitHub Pages

## 4. 主要なコンポーネント

UI/UXの詳細は[UI/UX 仕様書](uiux.md)を参照してください。

### 4.1. メイン画面

- **ヘッダー**: リソース表示、設定メニュー
- **メインビュー**: カフェ店内、キャラクター、インタラクション・ポイント
- **フッター／メインメニュー**: 「ノート」「メニュー開発」「内装変更」ボタン

### 4.2. 発見ノート（旧：レシピノート）

- ゲーム開始時はほぼ白紙の、プレイヤーが自身の発見を記録していく白紙の「実験日誌」。
- 日記のように、一日の終わりに自然な流れで記録するUI。

### 4.3. メニュー開発画面

- モーダルウィンドウ表示
- ボタン選択によるメニュー作成
- スライダーによる価格設定

### 4.4. 内装変更画面

- 編集モードへの切り替え
- カルーセル形式でのアイテム選択
- リアルタイムプレビュー

### 4.5. 営業日誌（旧：発見メモ）

- 「発見ノート」に統合。「一日の記録」として、プレイヤーが主体的に書き込む形式に変更。

## 5. データフロー

- **プレイヤーの操作**: UI操作がイベントとして発生。
- **ゲームロジック**: ゲーム内の状態が変化。
- **リソースの増減**: お客さんの満足度や施策の結果に応じてリソースが増減。
- **発見ノートへの記録**: 営業終了後、プレイヤーがその日の出来事を振り返り、主体的にノートに記録。
- **状態の永続化**: セーブ機能によりゲームの状態を保存。（詳細は[データ構造定義書](data-structure.md)を参照）

## 6. API設計

本ゲームはシングルプレイヤーのブラウザゲームであり、現時点では外部APIとの連携は想定していません。ゲーム内のデータはクライアントサイドで管理・永続化される見込みです。

## 7. デプロイ戦略

- **GitHub Pages**: 開発されたゲームはGitHub Pagesを利用してデプロイされます。
- **CI/CD**: GitHub Actionsなどを利用したCI/CDパイプラインの構築を推奨します。（アセットの扱いについては[アセットパイプライン定義書](asset-pipeline.md)も参照）

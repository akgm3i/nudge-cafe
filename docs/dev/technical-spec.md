# 技術仕様書：「ココロジック・カフェ」

## 1. 概要

「ココロジック・カフェ」は、スマートフォンブラウザ向けに開発される、物語体験を中心としたカフェ運営ゲームです。プレイヤー自身の体験から生まれた疑問を、カフェ運営を通じて検証し、自分だけの「発見ノート」を完成させていく「体験先行・仮説検証型」の物語体験ゲームです。プレイヤーの主体的な気づきと、その過程の物語体験を最優先します。

## 2. ゲームのアーキテクチャ

### 2.1. ゲームサイクル

ゲームのコアとなるのは「仮説検証サイクル」です。詳細は[システム仕様書](system.md)を参照してください。

*   **① 物語イベントの体験**: プレイヤーがゲーム内で不思議な出来事に遭遇する。
*   **② 常連客との会話による「問い」の発生**: フクロウ教授の問いかけにより、プレイヤーに疑問が生まれる。
*   **③ 営業方針の考案による「仮説」の立案**: ニャッジとの対話を通じ、プレイヤーが検証したいアイデアを思いつく。
*   **④ カフェ運営での「検証」の実践**: プレイヤーが考案した施策を実践する。
*   **⑤ 「発見ノート」への記録**: 結果を自分自身の言葉で「発見ノート」に記録する。

### 2.2. プログレッション

ゲームの進行は、プレイヤーが「発見ノート」を埋めていくことが主軸となります。詳細は[システム仕様書](system.md)を参照してください。

*   **物語の進行**: 特定の「発見」を記録することが、次の物語チャプターを解放する条件となります。
*   **「発見ノート」の完成**: プレイヤーが自身の体験と発見で白紙のノートを埋めていくこと自体が、ゲームの主目的です。

## 3. 使用技術

*   **フロントエンド**: TypeScript, React
*   **デプロイ**: GitHub Pages

## 4. 主要なコンポーネント

UI/UXの詳細は[UI/UX 仕様書](uiux.md)を参照してください。

### 4.1. メイン画面

*   **ヘッダー**: リソース表示、設定メニュー
*   **メインビュー**: カフェ店内、キャラクター、インタラクション・ポイント
*   **フッター／メインメニュー**: 「日誌」「メニュー開発」「内装変更」ボタン

### 4.2. 実験日誌（発見ノート）

*   ゲーム開始時はほぼ白紙のノート。
*   プレイヤーが手動で「きっかけ(WHY)」「やってみたこと(HOW)」「わかったこと(WHAT)」「まとめ(MEMO)」を記録していく。

### 4.3. メニュー開発画面

*   モーダルウィンドウ表示
*   ボタン選択によるメニュー作成
*   スライダーによる価格設定

### 4.4. 内装変更画面

*   編集モードへの切り替え
*   カルーセル形式でのアイテム選択
*   リアルタイムプレビュー

## 5. データフロー

*   **プレイヤーの操作**: UI操作がイベントとして発生。
*   **ゲームロジック**: ゲーム内の状態が変化。
*   **リソースの増減**: お客さんの満足度に応じてリソースが増減。
*   **発見ノートへの記録**: 一日の終わりに、プレイヤーが手動で発見を記録。
*   **状態の永続化**: セーブ機能によりゲームの状態を保存。（詳細は[データ構造定義書](data-structure.md)を参照）

## 6. API設計

本ゲームはシングルプレイヤーのブラウザゲームであり、現時点では外部APIとの連携は想定していません。ゲーム内のデータはクライアントサイドで管理・永続化される見込みです。

## 7. デプロイ戦略

*   **GitHub Pages**: 開発されたゲームはGitHub Pagesを利用してデプロイされます。
*   **CI/CD**: GitHub Actionsなどを利用したCI/CDパイプラインの構築を推奨します。（アセットの扱いについては[アセットパイプライン定義書](asset-pipeline.md)も参照）
